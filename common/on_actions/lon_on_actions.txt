on_actions = {
	on_startup = {
		effect = {
			clear_array = global.lon_members
			set_variable = { global.month = 1 }
			#majors
			add_to_array = { global.lon_members = ENG }
			every_country = {
				limit = {
					is_subject_of = ENG
				}
				add_to_array = { global.lon_members = THIS }
			}
			add_to_array = { global.lon_members = FRA }
			every_country = {
				limit = {
					is_subject_of = FRA
				}
				add_to_array = { global.lon_members = THIS }
			}
			add_to_array = { global.lon_members = ITA }
			add_to_array = { global.lon_members = SOV }
			add_to_array = { global.lon_members = CHI }

			add_to_array = { global.lon_members = HOL }
			every_country = {
				limit = {
					is_subject_of = HOL
				}
				add_to_array = { global.lon_members = THIS }
			}
			add_to_array = { global.lon_members = BEL }
			every_country = {
				limit = {
					is_subject_of = BEL
				}
				add_to_array = { global.lon_members = THIS }
			}
			add_to_array = { global.lon_members = LUX }
			add_to_array = { global.lon_members = SPR }
			add_to_array = { global.lon_members = POR }
			add_to_array = { global.lon_members = DEN }
			every_country = {
				limit = {
					is_subject_of = DEN
				}
				add_to_array = { global.lon_members = THIS }
			}
			add_to_array = { global.lon_members = SWI }
			add_to_array = { global.lon_members = IRE }
			add_to_array = { global.lon_members = AUS }
			add_to_array = { global.lon_members = CZE }
			add_to_array = { global.lon_members = HUN }
			add_to_array = { global.lon_members = YUG }
			add_to_array = { global.lon_members = BUL }
			add_to_array = { global.lon_members = ALB }
			add_to_array = { global.lon_members = GRE }
			add_to_array = { global.lon_members = ROM }
			add_to_array = { global.lon_members = SIA }
			add_to_array = { global.lon_members = AFG }
			add_to_array = { global.lon_members = IRQ }
			add_to_array = { global.lon_members = PER }
			add_to_array = { global.lon_members = TUR }
			add_to_array = { global.lon_members = ETH }
			add_to_array = { global.lon_members = POL }
			add_to_array = { global.lon_members = LIB }
			add_to_array = { global.lon_members = LIT }
			add_to_array = { global.lon_members = LAT }
			add_to_array = { global.lon_members = EST }
			add_to_array = { global.lon_members = SWE }
			add_to_array = { global.lon_members = NOR }
			add_to_array = { global.lon_members = FIN }
			add_to_array = { global.lon_members = GXC }
			add_to_array = { global.lon_members = YUN }
			add_to_array = { global.lon_members = SHX }
			add_to_array = { global.lon_members = PRC }
			add_to_array = { global.lon_members = XSM }
			add_to_array = { global.lon_members = SIK }
			add_to_array = { global.lon_members = MEX }
			add_to_array = { global.lon_members = ELS }
			add_to_array = { global.lon_members = PAN }
			add_to_array = { global.lon_members = COL }
			add_to_array = { global.lon_members = VEN }
			add_to_array = { global.lon_members = ECU }
			add_to_array = { global.lon_members = PRU }
			add_to_array = { global.lon_members = BOL }
			add_to_array = { global.lon_members = CHL }
			add_to_array = { global.lon_members = PAR }
			add_to_array = { global.lon_members = ARG }
			add_to_array = { global.lon_members = URG }
			add_to_array = { global.lon_members = CUB }
			add_to_array = { global.lon_members = HAI }
			add_to_array = { global.lon_members = DOM }
			remove_from_array = { global.lon_members = EGY }

			set_variable = { global.lon_leader = SPR }

			for_each_scope_loop = {
				array = global.lon_members
				set_variable = { lon_threat = 0 }
			}
			for_each_scope_loop = {
				array = global.lon_members
				set_variable = { lon_vote = global.lon_leader }
			}
		}
	}
	on_daily = {
		effect = {
			if = {
				limit = {
					controls_state = 64
				}
				for_each_scope_loop = {
					array = global.lon_members
					set_variable = { lon_votes = 0 }
				}
				for_each_loop = {
					array = global.lon_members
					value = r
					for_each_scope_loop = {
						array = global.lon_members
						if = {
							limit = {
								var:r = { check_variable = { lon_vote = PREV } }
							}
							add_to_variable = { lon_votes = 1 }
						}
					}
				}
				if = {
					limit = {
						check_variable = { global.lon_elections > 0 }
					}
					if = {
						limit = {
							check_variable = { global.lon_elections = 1 }
						}
						set_temp_variable = { new_leader = -1 }
						set_temp_variable = { votes = 0 }
						for_each_scope_loop = {
							array = global.lon_members
							if = {
								limit = {
									check_variable = { lon_votes > votes }
								}
								set_temp_variable = { votes = lon_votes }
								set_temp_variable = { new_leader = THIS }
							}
						}
						set_variable = { global.lon_leader = new_leader }
						news_event = lon.1
					}
					subtract_from_variable = { global.lon_elections = 1 }
				}
			}
		}
	}
	on_weekly = {
		effect = {
			if = {
				limit = {
					check_variable = { lon_voted > 0 }
				}
				subtract_from_variable = { lon_voted = 1 }
			}
		}
	}
	on_monthly = {
		effect = {
			if = {
				limit = {
					controls_state = 64
				}
				add_to_variable = { global.month = 1 }
				if = {
					limit = { check_variable = { global.month > 12 } }
					set_variable = { global.month = 1 }
				}
			}

			if = {
				limit = {
					check_variable = { global.month = 9 }
				}
				set_variable = { global.lon_elections = 7 }
			}

			if = {
				limit = {
					has_war = yes
				}
				add_to_variable = { lon_threat = 0.002 }
			}
			else = {
				subtract_from_variable = { lon_threat = 0.005 }
			}
			if = {
				limit = {
					check_variable = { lon_threat < 0 }
				}
				set_variable = { lon_threat = 0 }
			}
			else_if = {
				limit = {
					check_variable = { lon_threat > 1 }
				}
				set_variable = { lon_threat = 1 }
			}
		}
	}
	on_capitulation = {
		effect = {
			if = {
				limit = {
					check_variable = { global.lon_leader = THIS }
				}
				set_variable = { global.lon_elections = 7 }
			}
		}
	}
	on_peace = {
		effect = {
			add_to_variable = { lon_threat = -0.05 }
			if = {
				limit = {
					check_variable = { lon_threat < 0 }
				}
				set_variable = { lon_threat = 0 }
			}
			else_if = {
				limit = {
					check_variable = { lon_threat > 1 }
				}
				set_variable = { lon_threat = 1 }
			}
		}
	}
	on_liberate = {
		effect = {
			FROM = {
				add_to_variable = { lon_threat = -0.05 }
				if = {
					limit = {
						check_variable = { lon_threat < 0 }
					}
					set_variable = { lon_threat = 0 }
				}
				else_if = {
					limit = {
						check_variable = { lon_threat > 1 }
					}
					set_variable = { lon_threat = 1 }
				}
			}
		}
	}
	on_send_volunteers = {
		effect = {
			add_to_variable = { lon_threat = 0.01 }
			if = {
				limit = {
					check_variable = { lon_threat < 0 }
				}
				set_variable = { lon_threat = 0 }
			}
			else_if = {
				limit = {
					check_variable = { lon_threat > 1 }
				}
				set_variable = { lon_threat = 1 }
			}
		}
	}
	on_declare_war = {
		effect = {
			add_to_variable = { lon_threat = 0.05 }
			if = {
				limit = {
					check_variable = { lon_threat < 0 }
				}
				set_variable = { lon_threat = 0 }
			}
			else_if = {
				limit = {
					check_variable = { lon_threat > 1 }
				}
				set_variable = { lon_threat = 1 }
			}
		}
	}
	on_puppet = {
		effect = {
			FROM = {
				add_to_variable = { lon_threat = 0.05 }
				if = {
					limit = {
						check_variable = { lon_threat < 0 }
					}
					set_variable = { lon_threat = 0 }
				}
				else_if = {
					limit = {
						check_variable = { lon_threat > 1 }
					}
					set_variable = { lon_threat = 1 }
				}
			}
		}
	}
	on_annex = {
		effect = {
			add_to_variable = { lon_threat = 0.15 }
			if = {
				limit = {
					check_variable = { lon_threat < 0 }
				}
				set_variable = { lon_threat = 0 }
			}
			else_if = {
				limit = {
					check_variable = { lon_threat > 1 }
				}
				set_variable = { lon_threat = 1 }
			}
			FROM = {
				if = {
					limit = {
						is_in_array = { global.lon_members = THIS }
					}
					remove_from_array = { global.lon_members = THIS }
					if = {
						limit = {
							check_variable = { global.lon_leader = THIS }
						}
						set_variable = { global.lon_elections = 7 }
					}
				}
			}
		}
	}
}